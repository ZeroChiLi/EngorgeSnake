C51 COMPILER V9.01   MAIN                                                                  05/25/2017 14:40:52 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: D:\Program\Keil\C51\BIN\C51.EXE main.c LARGE BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include "MatrixLED.h"
   2          #include "Snake.h"
   3          #include "Food.h"
   4          #include "KeyboardInput.h"
   5          
   6          void startGame(Snake * snake,Food * food);
   7          
   8          unsigned char updateByKeyboard(Snake * snake, Food * food);
   9          
  10          void updateFood(Food * food);
  11          
  12          void main(void)
  13          {                
  14   1              unsigned char keyNum = 0;
  15   1              Snake snake;
  16   1              Food food;
  17   1      
  18   1              startGame(&snake,&food);                                                        //初始化游戏成员对象
  19   1      
  20   1              while (1)
  21   1              {                       
  22   2                      initRedMatrix();                                                                //初始化红绿点阵                                
  23   2                      initGreenMatrix();        
  24   2      
  25   2              //      if(updateByKeyboard(&snake,&food) == 0)                 //通过键盘更新蛇方向，重启游戏。
  26   2              //              continue;
  27   2      
  28   2                      snakeMove(&snake);                                                              //更新蛇位置
  29   2      
  30   2                      updateFood(&food);                                                              //更新食物
  31   2                                                               
  32   2                      updateCol();                                                                    //更新每列数值
  33   2      
  34   2                      showMatrix(1000);                                                               //显示红绿点阵
  35   2      
  36   2                      if (snakeCollision(&snake, &food) || updateByKeyboard(&snake,&food) == 0)                               //检测碰撞(包括吃食物)
  37   2                              startGame(&snake,&food);
  38   2              }
  39   1      }
  40          
  41          void startGame(Snake * snake, Food * food)
  42          {
  43   1              initSnake(snake);
  44   1              initFood(food);
  45   1      }
  46                     
  47          unsigned char updateByKeyboard(Snake * snake, Food * food)
  48          {                
  49   1              unsigned char keyNum = 0;
  50   1          keyNum = key_Scan();                                                                        //扫描键盘
  51   1      
  52   1              if (isDirection(getDirectionFromKey(keyNum)))                   //判断是否为方向
  53   1                      snakeSetDir(snake, getDirectionFromKey(keyNum));
  54   1      
  55   1              if (onClickRestartKey(keyNum))                                                  //按了key1就是重启游戏
C51 COMPILER V9.01   MAIN                                                                  05/25/2017 14:40:52 PAGE 2   

  56   1                      return 0;
  57   1              return 1;
  58   1      }
*** WARNING C280 IN LINE 47 OF MAIN.C: 'food': unreferenced local variable
  59          
  60          void updateFood(Food * food)
  61          {
  62   1              if (!foodExist(food))                                                   //判断是否存在食物,没有就加啊
  63   1                      foodsetPos(food, getRandomFreePos());
  64   1              
  65   1              foodShow(food);                                                         //显示食物
  66   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    289    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----     150
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
