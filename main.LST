C51 COMPILER V9.01   MAIN                                                                  05/24/2017 23:31:06 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: D:\Program\Keil\C51\BIN\C51.EXE main.c LARGE BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include "MatrixLED.h"
   2          #include "Snake.h"
   3          #include "Food.h"
   4          #include "KeyboardInput.h"
   5          
   6          #define RESTART_GAME 0xFE
   7          
   8          void startGame(Snake * snake,Food * food);
   9          
  10          void main(void)
  11          {
  12   1              unsigned char keyNum = 0;                
  13   1              Snake snake;
  14   1              Food food;
  15   1      
  16   1              startGame(&snake,&food);                                                        //初始化游戏成员对象
  17   1      
  18   1              while (1)
  19   1              {                       
  20   2                      initRedMatrix();                                                                //初始化红绿点阵                                
  21   2                      initGreenMatrix();        
  22   2      
  23   2                      keyNum = key_Scan();                                                    //扫描键盘
  24   2      
  25   2                      if (keyNum == RESTART_GAME)                                             //按了key1就是重启游戏
  26   2                      {
  27   3                              startGame(&snake,&food);
  28   3                              continue;
  29   3                      }
  30   2                      
  31   2                      if (isDirection(keyNum))                                            //判断是否为方向
  32   2                              snakeSetDir(&snake, keyNum);
  33   2                      
  34   2                      snakeMove(&snake);                                                              //更新蛇位置
  35   2                      updateRedMat((*snakeGetHead(&snake)));
  36   2      
  37   2                      if (!foodExist(&food))                                                  //判断是否存在食物,没有就加啊
  38   2                              foodsetPos(&food, getRandomFreePos());
  39   2                      
  40   2                      foodShow(&food);                                                                //显示食物
  41   2                                                               
  42   2                      updateCol();                                                                    //更新每列数值
  43   2      
  44   2                      showMatrix(1000);                                                               //显示红绿点阵
  45   2      
  46   2                      if (snakeCollision(&snake, &food))                              //检测碰撞(包括吃食物)
  47   2                              startGame(&snake,&food);
  48   2              }
  49   1      }
  50          
  51          void startGame(Snake * snake, Food * food)
  52          {
  53   1              initSnake(snake);
  54   1              initFood(food);
  55   1      }
C51 COMPILER V9.01   MAIN                                                                  05/24/2017 23:31:06 PAGE 2   



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    240    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----     140
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
