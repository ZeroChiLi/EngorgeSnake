C51 COMPILER V9.01   SNAKE                                                                 03/23/2017 23:17:53 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE SNAKE
OBJECT MODULE PLACED IN snake.OBJ
COMPILER INVOKED BY: D:\Program\Keil\C51\BIN\C51.EXE snake.c LARGE BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include "snake.h"
   2          
   3          void initSnake(Snake * snake)
   4          {
   5   1              Point p;
   6   1              p.x = 5;
   7   1              p.y = 6;
   8   1              p.dir = UP;
   9   1              (*snake)._length = 0;
  10   1              snakeSetHead(snake, p);
  11   1      }
  12          
  13          unsigned char snakeSetHead(Snake * snake, Point point)
  14          {
  15   1              if (snake == 0)
  16   1                      return 0;
  17   1              snakeAddBody(snake, point);
  18   1              return 1;
  19   1      }
  20          
  21          void snakeAddBody(Snake *snake, Point point)
  22          {
  23   1              (*snake)._body[(*snake)._length] = point;
  24   1              ++(*snake)._length;
  25   1      }
  26          
  27          Point * snakeGetHead(Snake * snake) { return &((*snake)._body[0]); }
  28          
  29          void snakeSetDir(Snake * snake, Direction dir) 
  30          { 
  31   1              Direction currentDir = (*snakeGetHead(snake)).dir;
  32   1              if ((currentDir == UP && dir == DOWN) ||
  33   1                      (currentDir == DOWN && dir == UP) ||
  34   1                      (currentDir == LEFT && dir == RIGHT) ||
  35   1                      (currentDir == RIGHT && dir == LEFT))
  36   1                      return;
  37   1              (*snakeGetHead(snake)).dir = dir; 
  38   1      }
  39          
  40          unsigned char snakeCollision(Snake *snake, Feed *feed)
  41          {
  42   1              unsigned char headX = (*snake)._body[0].x;
  43   1              unsigned char headY = (*snake)._body[0].y;
  44   1              unsigned char i = 1;
  45   1              if (feed != 0)
  46   1                      if (headX == (*feed).x && headY == (*feed).y)
  47   1                      {
  48   2                              ++(*snake)._length;
  49   2                              feedEaten(feed);
  50   2                              return 0;
  51   2                      }
  52   1      
  53   1              for (; i < (*snake)._length; ++i)
  54   1                      if (headX == (*snake)._body[i].x && headY == (*snake)._body[i].y)
  55   1                              return 1;
C51 COMPILER V9.01   SNAKE                                                                 03/23/2017 23:17:53 PAGE 2   

  56   1              return 0;
  57   1      }
  58          
  59          void snakeMove(Snake *snake)
  60          {
  61   1              unsigned char i = (*snake)._length - 1;
  62   1              for (; i >= 1; --i)
  63   1              {
  64   2                      (*snake)._body[i] = (*snake)._body[i - 1];
  65   2                      updateRedMat((*snake)._body[i]);
  66   2              }
  67   1              movePoint(snakeGetHead(snake), (*snakeGetHead(snake)).dir);
  68   1              updateRedMat((*snakeGetHead(snake)));
  69   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    661    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----      31
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
